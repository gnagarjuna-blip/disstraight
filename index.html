<style>
    /* Add this to your existing CSS */
    .missing-list { flex: 1; max-height: 250px; overflow-y: auto; border-left: 1px solid #eee; padding-left: 8px; }
    .missing-item { font-size: 11px; color: #7f8c8d; padding: 1px 0; display: inline-block; width: 30px; }
</style>

<div class="card">
    <strong>Distance Tracker, Frequency & Missing</strong>
    <hr>
    <div class="dist-flex">
        <div id="dist-log" class="dist-list"></div>
        <div id="freq-rank" class="freq-list"></div>
        <div id="missing-dist" class="missing-list"></div>
    </div>
</div>

<script>
    // Replace your updateFrequencyUI function with this updated version
    function updateFrequencyUI() {
        const freqMap = {};
        // Track which distances have hit
        const hitDistances = new Set();
        
        distanceHistory.forEach(d => {
            freqMap[d] = (freqMap[d] || 0) + 1;
            hitDistances.add(parseInt(d));
        });

        // 1. Update Frequency Rank
        const sortedFreq = Object.entries(freqMap).sort((a, b) => b[1] - a[1] || a[0] - b[0]);
        const freqDiv = document.getElementById('freq-rank');
        freqDiv.innerHTML = '<strong>Freq Rank</strong><br>';
        
        sortedFreq.forEach(([dist, count]) => {
            const item = document.createElement('div');
            item.className = `freq-item ${count > 1 ? 'is-repeating' : ''}`;
            item.innerHTML = `<span>Dist ${dist}</span> <span>${count}x</span>`;
            freqDiv.appendChild(item);
        });

        // 2. Update Missing Distances
        const missingDiv = document.getElementById('missing-dist');
        missingDiv.innerHTML = '<strong>Missing</strong><br>';
        
        let missingContent = '';
        // Check all possible distances from 0 to 36
        for (let i = 0; i <= 36; i++) {
            if (!hitDistances.has(i)) {
                missingContent += `<span class="missing-item">${i}</span>`;
            }
        }
        missingDiv.innerHTML += missingContent || '<span style="font-size:10px; color:var(--win)">All Hit!</span>';
    }
</script>
